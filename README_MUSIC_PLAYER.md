# Electron 音乐播放器开发文档

## 项目概述

本项目是基于 Electron + Vue 3 + TypeScript + Ant Design Vue 构建的跨平台音乐播放器。该项目利用了现有的项目模板，并添加了音乐播放功能。

## 已实现功能

### 1. 用户界面
- 使用 Ant Design Vue 组件库构建现代化界面
- 响应式三栏布局（侧边栏、主内容区、播放控制区）
- 主页、搜索页、播放列表页、音乐库页四个主要页面
- 播放控制组件，包含播放/暂停、上一首/下一首、音量控制等功能

### 2. 路由系统
- 使用 Vue Router 实现页面导航
- 支持主页、搜索、播放列表、音乐库等页面路由

### 3. 状态管理
- 使用 Pinia 实现音乐播放状态管理
- 管理当前播放曲目、播放状态、音量、播放进度等信息

### 4. 音频播放
- 集成 Howler.js 库实现音频播放功能
- 支持播放、暂停、停止、音量控制、跳转等基本功能
- 支持多种音频格式（MP3、WAV、OGG 等）

### 5. 桌面端增强功能
- 全局快捷键支持：
  - Ctrl + Shift + P: 播放/暂停
  - Ctrl + Shift + N: 下一首
  - Ctrl + Shift + B: 上一首
  - Ctrl + Shift + Up: 音量增加
  - Ctrl + Shift + Down: 音量减少
- 系统托盘集成（待实现）

### 6. 安全性
- 预加载脚本中实现安全的 IPC 通信机制
- 限制渲染进程只能访问授权的 IPC 通道

## 项目结构

```
src/
├── main/                 # 主进程代码
│   └── index.ts          # 主进程入口文件
├── preload/              # 预加载脚本
│   └── index.ts          # 预加载脚本入口文件
└── renderer/             # 渲染进程代码
    ├── components/       # 公共组件
    │   └── PlayerControls.vue  # 播放控制组件
    ├── composables/      # 组合式函数
    │   └── useMusicPlayer.ts   # 音乐播放器核心功能
    ├── store/            # 状态管理
    │   └── music.ts      # 音乐播放状态管理
    ├── view/             # 页面组件
    │   ├── HomePage.vue        # 主页
    │   ├── SearchPage.vue      # 搜索页
    │   ├── PlaylistPage.vue    # 播放列表页
    │   ├── LibraryPage.vue     # 音乐库页
    │   └── TestPlayer.vue      # 测试播放器页
    ├── router/           # 路由配置
    │   └── index.ts      # 路由配置文件
    ├── App.vue           # 根组件
    └── main.ts           # 渲染进程入口文件
```

## 待实现功能

### 1. 音频播放增强
- 音频可视化波形显示
- 均衡器功能
- 播放列表管理
- 音频格式支持扩展

### 2. 音乐库管理
- 本地音乐文件扫描
- 音乐元数据解析
- 播放历史记录
- 用户自定义播放列表

### 3. 桌面端增强功能
- 系统托盘集成和迷你播放器
- 媒体会话控制（Windows）
- 文件拖拽导入支持
- 开机自启动设置

### 4. 用户体验优化
- 深色/浅色主题切换
- 动画和过渡效果优化
- 响应式设计完善
- 移动端适配

## 开发指南

### 安装依赖
```bash
npm install
```

### 开发模式运行
```bash
npm run dev
```

### 构建应用
```bash
npm run build
```

## 技术栈

- Electron: 跨平台桌面应用框架
- Vue 3: 前端框架
- TypeScript: 类型安全的 JavaScript 超集
- Ant Design Vue: UI 组件库
- Pinia: 状态管理
- Howler.js: 音频播放库
- Vue Router: 路由管理

## 测试说明

### 功能测试
1. 启动应用后，点击左侧菜单的"测试播放器"进入测试页面
2. 点击"播放测试音频"按钮测试基本播放功能
3. 使用播放控制按钮测试播放/暂停、停止功能
4. 调整音量滑块测试音量控制功能
5. 使用全局快捷键测试桌面端增强功能：
   - Ctrl + Shift + P: 播放/暂停
   - Ctrl + Shift + N: 下一首
   - Ctrl + Shift + B: 上一首
   - Ctrl + Shift + Up: 音量增加
   - Ctrl + Shift + Down: 音量减少

### 注意事项

1. 在开发过程中，请遵循现有的代码风格和项目结构
2. 添加新功能时，请确保实现相应的安全措施
3. 对于 IPC 通信，请使用预加载脚本中定义的安全通道
4. 音频文件路径需要进行安全验证，防止路径遍历攻击